{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/thomas/langchain-crash-course/frontend/app/components/Preference.tsx"],"sourcesContent":["\"use client\";\nimport { useState } from \"react\";\n\nconst Home: React.FC<{\n  options?: string[];\n  onPreferenceChange: (value: string[]) => void;\n}> = ({ options = [], onPreferenceChange }) => {\n  const [selectedOptions, setSelectedOptions] = useState<string[]>([]);\n\n  const toggleOption = (option: string) => {\n    setSelectedOptions((prevSelectedOptions) => {\n      const newSelectedOptions = prevSelectedOptions.includes(option)\n        ? prevSelectedOptions.filter((opt) => opt !== option)\n        : [...prevSelectedOptions, option];\n\n      return newSelectedOptions;\n    });\n    onPreferenceChange(selectedOptions);\n  };\n\n  const combinedText = selectedOptions.join(\"、\");\n\n  return (\n    <div className=\"flex flex-col items-center p-4\">\n      <h1 className=\"text-xl font-bold mb-4\">偏好選擇</h1>\n      <div className=\"flex flex-wrap gap-4 justify-center\">\n        {options.map((option, index) => (\n          <div\n            key={index}\n            onClick={() => toggleOption(option)}\n            className={`cursor-pointer p-4 border rounded-md transition ${\n              selectedOptions.includes(option)\n                ? \"bg-blue-500 text-white\"\n                : \"bg-gray-200 text-gray-800\"\n            } hover:shadow-lg`}\n          >\n            {option}\n          </div>\n        ))}\n      </div>\n\n      {combinedText && (\n        <div className=\"mt-4 p-4 bg-gray-100 rounded-md text-gray-800\">\n          <strong>偏好: </strong> {combinedText}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Home;\n"],"names":[],"mappings":";;;;AACA;AADA;;;AAGA,MAAM,OAGD,CAAC,EAAE,UAAU,EAAE,EAAE,kBAAkB,EAAE;IACxC,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAY,EAAE;IAEnE,MAAM,eAAe,CAAC;QACpB,mBAAmB,CAAC;YAClB,MAAM,qBAAqB,oBAAoB,QAAQ,CAAC,UACpD,oBAAoB,MAAM,CAAC,CAAC,MAAQ,QAAQ,UAC5C;mBAAI;gBAAqB;aAAO;YAEpC,OAAO;QACT;QACA,mBAAmB;IACrB;IAEA,MAAM,eAAe,gBAAgB,IAAI,CAAC;IAE1C,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAAyB;;;;;;0BACvC,8OAAC;gBAAI,WAAU;0BACZ,QAAQ,GAAG,CAAC,CAAC,QAAQ,sBACpB,8OAAC;wBAEC,SAAS,IAAM,aAAa;wBAC5B,WAAW,CAAC,gDAAgD,EAC1D,gBAAgB,QAAQ,CAAC,UACrB,2BACA,4BACL,gBAAgB,CAAC;kCAEjB;uBARI;;;;;;;;;;YAaV,8BACC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;kCAAO;;;;;;oBAAa;oBAAE;;;;;;;;;;;;;AAKjC;uCAEe"}},
    {"offset": {"line": 81, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 87, "column": 0}, "map": {"version":3,"sources":["file:///home/thomas/langchain-crash-course/frontend/app/components/Switch.tsx"],"sourcesContent":["import React from \"react\";\r\n\r\ninterface SwitchProps {\r\n  isOn: boolean;\r\n  handleToggle: () => void;\r\n  id: string;\r\n}\r\n\r\nconst Switch: React.FC<SwitchProps> = ({ isOn, handleToggle, id }) => {\r\n  return (\r\n    <div className=\"relative w-12 h-6\">\r\n      <input\r\n        checked={isOn}\r\n        onChange={handleToggle}\r\n        className=\"absolute w-0 h-0 opacity-0\"\r\n        id={id}\r\n        type=\"checkbox\"\r\n      />\r\n      <label\r\n        htmlFor={id}\r\n        className={`flex items-center justify-between w-full h-full rounded-full transition-colors duration-200 cursor-pointer ${\r\n          isOn ? \"bg-green-500\" : \"bg-gray-400\"\r\n        }`}\r\n      >\r\n        <span\r\n          className={`absolute top-1 left-1 w-4 h-4 rounded-full bg-white shadow-md transform transition-transform duration-200 ${\r\n            isOn ? \"translate-x-6\" : \"\"\r\n          }`}\r\n        />\r\n      </label>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Switch;\r\n"],"names":[],"mappings":";;;;;AAQA,MAAM,SAAgC,CAAC,EAAE,IAAI,EAAE,YAAY,EAAE,EAAE,EAAE;IAC/D,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBACC,SAAS;gBACT,UAAU;gBACV,WAAU;gBACV,IAAI;gBACJ,MAAK;;;;;;0BAEP,8OAAC;gBACC,SAAS;gBACT,WAAW,CAAC,2GAA2G,EACrH,OAAO,iBAAiB,eACxB;0BAEF,cAAA,8OAAC;oBACC,WAAW,CAAC,0GAA0G,EACpH,OAAO,kBAAkB,IACzB;;;;;;;;;;;;;;;;;AAKZ;uCAEe"}},
    {"offset": {"line": 130, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 136, "column": 0}, "map": {"version":3,"sources":["file:///home/thomas/langchain-crash-course/frontend/app/components/Cards.tsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport Switch from \"@/app/components/Switch\";\n\ninterface CardProps {\n  title: string;\n  openingTime: string;\n  onToggle: (value: string) => void;\n}\n\nconst Card: React.FC<CardProps> = ({ title, openingTime, onToggle }) => {\n  const [isOn, setIsOn] = useState<boolean>(false);\n\n  const handleToggle = () => {\n    setIsOn(!isOn);\n    onToggle(title);\n  };\n\n  const splitText = (text: string) => {\n    const s: string[] = text.split(\" \");\n    return s.slice(1).join(\" \");\n  };\n  return (\n    <>\n      <div className=\"flex flex-col items-center p-4 bg-white rounded-lg shadow-md text-black h-full w-full\">\n        <h2 className=\"text-lg font-bold mt-2 ml-2 content-center\">{title}</h2>\n        <p>{`週日開放時間: ${splitText(openingTime)}`}</p>\n        <div className=\"flex flex-col sm:flex-row items-center sm:space-x-4 mt-4 space-y-2 sm:space-y-0\">\n          <Switch\n            isOn={isOn}\n            handleToggle={handleToggle}\n            id={`switch-${title}`}\n          />\n          <button\n            type=\"button\"\n            className=\"font-semibold  hover:text-blue-500\"\n            onClick={() =>\n              window.open(`/sites/${encodeURIComponent(title)}`, \"_blank\")\n            }\n          >\n            Learn more...\n          </button>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default Card;\n"],"names":[],"mappings":";;;;AAAA;AACA;;;;AAQA,MAAM,OAA4B,CAAC,EAAE,KAAK,EAAE,WAAW,EAAE,QAAQ,EAAE;IACjE,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAW;IAE1C,MAAM,eAAe;QACnB,QAAQ,CAAC;QACT,SAAS;IACX;IAEA,MAAM,YAAY,CAAC;QACjB,MAAM,IAAc,KAAK,KAAK,CAAC;QAC/B,OAAO,EAAE,KAAK,CAAC,GAAG,IAAI,CAAC;IACzB;IACA,qBACE;kBACE,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAG,WAAU;8BAA8C;;;;;;8BAC5D,8OAAC;8BAAG,CAAC,QAAQ,EAAE,UAAU,cAAc;;;;;;8BACvC,8OAAC;oBAAI,WAAU;;sCACb,8OAAC,4HAAA,CAAA,UAAM;4BACL,MAAM;4BACN,cAAc;4BACd,IAAI,CAAC,OAAO,EAAE,OAAO;;;;;;sCAEvB,8OAAC;4BACC,MAAK;4BACL,WAAU;4BACV,SAAS,IACP,OAAO,IAAI,CAAC,CAAC,OAAO,EAAE,mBAAmB,QAAQ,EAAE;sCAEtD;;;;;;;;;;;;;;;;;;;AAOX;uCAEe"}},
    {"offset": {"line": 211, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 222, "column": 0}, "map": {"version":3,"sources":["file:///home/thomas/langchain-crash-course/frontend/app/components/TravelCard.tsx"],"sourcesContent":["import React from \"react\";\nimport Image from \"next/image\";\n\ninterface TravelCardProps {\n  title: string;\n  imageSrc: string;\n  alt: string;\n  arrive_time: string;\n  stay_time: number | null;\n}\n\nconst TravelCard: React.FC<TravelCardProps> = ({\n  title,\n  imageSrc,\n  alt,\n  arrive_time,\n  stay_time,\n}) => {\n  function transferTime(time: number) {\n    const hours = Math.floor(time / 60);\n    const minutes = time % 60;\n    if (hours === 0) {\n      return `${minutes} 分鐘`;\n    }\n    if (minutes === 0) {\n      return `${hours} 小時`;\n    }\n    return `${hours} 小時  ${minutes} 分鐘`;\n  }\n  const timeParts = arrive_time.split(\":\");\n  const hour = timeParts.length > 1 ? parseInt(timeParts[0], 10) : 0;\n  const isAfternoon = hour > 12;\n\n  return (\n    <div\n      className={`flex flex-col items-start p-4 rounded-lg shadow-md text-black h-full ${\n        isAfternoon ? \"bg-yellow-200\" : \"bg-orange-100\"\n      }`}\n    >\n      <h2 className=\"text-xl font-bold mt-2 ml-2 mb-1\">{title}</h2>\n      <Image\n        src={imageSrc}\n        alt={alt}\n        width={300}\n        height={175}\n        className=\"rounded-lg object-cover\"\n      />\n      <p className=\"font-medium text-lg mb-[1.5px] mt-0.5\">\n        預計到達時間: {arrive_time}\n      </p>\n      {stay_time !== null && (\n        <p className=\"font-medium text-lg \">\n          預估停留時間: {transferTime(stay_time)}\n        </p>\n      )}\n      <button\n        type=\"button\"\n        className=\"font-semibold  hover:text-blue-500\"\n        onClick={() =>\n          window.open(`/sites/${encodeURIComponent(title)}`, \"_blank\")\n        }\n      >\n        Learn more...\n      </button>\n    </div>\n  );\n};\n\nexport default TravelCard;\n\nexport type { TravelCardProps };\n"],"names":[],"mappings":";;;;AACA;;;AAUA,MAAM,aAAwC,CAAC,EAC7C,KAAK,EACL,QAAQ,EACR,GAAG,EACH,WAAW,EACX,SAAS,EACV;IACC,SAAS,aAAa,IAAY;QAChC,MAAM,QAAQ,KAAK,KAAK,CAAC,OAAO;QAChC,MAAM,UAAU,OAAO;QACvB,IAAI,UAAU,GAAG;YACf,OAAO,GAAG,QAAQ,GAAG,CAAC;QACxB;QACA,IAAI,YAAY,GAAG;YACjB,OAAO,GAAG,MAAM,GAAG,CAAC;QACtB;QACA,OAAO,GAAG,MAAM,KAAK,EAAE,QAAQ,GAAG,CAAC;IACrC;IACA,MAAM,YAAY,YAAY,KAAK,CAAC;IACpC,MAAM,OAAO,UAAU,MAAM,GAAG,IAAI,SAAS,SAAS,CAAC,EAAE,EAAE,MAAM;IACjE,MAAM,cAAc,OAAO;IAE3B,qBACE,8OAAC;QACC,WAAW,CAAC,qEAAqE,EAC/E,cAAc,kBAAkB,iBAChC;;0BAEF,8OAAC;gBAAG,WAAU;0BAAoC;;;;;;0BAClD,8OAAC,6HAAA,CAAA,UAAK;gBACJ,KAAK;gBACL,KAAK;gBACL,OAAO;gBACP,QAAQ;gBACR,WAAU;;;;;;0BAEZ,8OAAC;gBAAE,WAAU;;oBAAwC;oBAC1C;;;;;;;YAEV,cAAc,sBACb,8OAAC;gBAAE,WAAU;;oBAAuB;oBACzB,aAAa;;;;;;;0BAG1B,8OAAC;gBACC,MAAK;gBACL,WAAU;gBACV,SAAS,IACP,OAAO,IAAI,CAAC,CAAC,OAAO,EAAE,mBAAmB,QAAQ,EAAE;0BAEtD;;;;;;;;;;;;AAKP;uCAEe"}},
    {"offset": {"line": 306, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 312, "column": 0}, "map": {"version":3,"sources":["file:///home/thomas/langchain-crash-course/frontend/app/components/TravelTimeArrow.tsx"],"sourcesContent":["import React from \"react\";\n\ninterface TravelTimeArrowProps {\n  travelTime: number;\n}\n\nconst TravelTimeArrow: React.FC<TravelTimeArrowProps> = ({ travelTime }) => {\n  const transferArrivalTime = (time: number) => {\n    const hours: number = (time / 60) | 0;\n    const minutes: number = time % 60;\n    if (hours === 0) {\n      return `${minutes}分`;\n    }\n    return `${hours}時 ${minutes}分`;\n  };\n\n  return (\n    <div className=\"flex items-center\">\n      {/* Arrow */}\n      <div className=\"flex flex-col items-center\">\n        {/* Arrow Line */}\n        <div className=\"w-2 h-20 bg-blue-500\"></div>\n        {/* Arrow Head */}\n        <div className=\"w-0 h-0 border-l-[12px] border-l-transparent border-r-[12px] border-r-transparent border-t-[12px] border-t-blue-500\"></div>\n      </div>\n\n      {/* Travel Time Label */}\n      <div className=\"text-2xl text-gray-800 font-semibold ml-2 mr-auto\">\n        {transferArrivalTime(travelTime)}\n      </div>\n    </div>\n  );\n};\n\nexport default TravelTimeArrow;\n"],"names":[],"mappings":";;;;;AAMA,MAAM,kBAAkD,CAAC,EAAE,UAAU,EAAE;IACrE,MAAM,sBAAsB,CAAC;QAC3B,MAAM,QAAgB,AAAC,OAAO,KAAM;QACpC,MAAM,UAAkB,OAAO;QAC/B,IAAI,UAAU,GAAG;YACf,OAAO,GAAG,QAAQ,CAAC,CAAC;QACtB;QACA,OAAO,GAAG,MAAM,EAAE,EAAE,QAAQ,CAAC,CAAC;IAChC;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBAAI,WAAU;;kCAEb,8OAAC;wBAAI,WAAU;;;;;;kCAEf,8OAAC;wBAAI,WAAU;;;;;;;;;;;;0BAIjB,8OAAC;gBAAI,WAAU;0BACZ,oBAAoB;;;;;;;;;;;;AAI7B;uCAEe"}},
    {"offset": {"line": 368, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 374, "column": 0}, "map": {"version":3,"sources":["file:///home/thomas/langchain-crash-course/frontend/app/components/ScheduleSites.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect } from \"react\";\nimport TravelCard from \"./TravelCard\";\nimport TravelTimeArrow from \"./TravelTimeArrow\";\nimport Link from \"next/link\";\n\ninterface ScheduleSitesProps {\n  day: number;\n  sites: string;\n  start_time: number;\n  end_time: number;\n  start_point: string;\n  onSubmit: () => void;\n}\n\ninterface NodeProps {\n  arrival: number;\n  end_node: boolean;\n  name: string;\n  service: number;\n  travel: number;\n  vehicle: number;\n}\nconst ScheduleSitesComponent: React.FC<ScheduleSitesProps> = ({\n  day,\n  sites,\n  start_time,\n  end_time,\n  start_point,\n  onSubmit,\n}) => {\n  const [scheduleSites, setScheduleSites] = useState<NodeProps[]>([]);\n  const [error, setError] = useState<string | null>(null);\n  const [isLoading, setLoading] = useState<boolean>(true);\n\n  const handleSubmit = () => {\n    onSubmit();\n    setError(null);\n    setScheduleSites([]);\n  };\n  useEffect(() => {\n    async function fetchScheduleSites() {\n      try {\n        const response = await fetch(\"/api/routing\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify({\n            day,\n            sites,\n            start_time,\n            end_time,\n            start_point,\n          }),\n        });\n\n        if (!response.ok) {\n          throw new Error(\"Failed to fetch scheduled route\");\n        }\n\n        const data = await response.json();\n\n        setLoading(false);\n        if (data.result && Array.isArray(data.result)) {\n          setScheduleSites(data.result);\n        } else {\n          throw new Error(\"Unexpected data structure\");\n        }\n      } catch (error: unknown) {\n        if (error instanceof Error) {\n          setError(error.message);\n        } else {\n          setError(\"An unknown error occurred\");\n        }\n      }\n    }\n\n    fetchScheduleSites();\n  }, [day, sites, start_time, end_time, start_point]); // Dependencies to re-fetch when day or preference changes\n\n  if (error) {\n    return <p>Error: {error}</p>;\n  }\n\n  const transferArrivalTime = (time: number) => {\n    time = time + start_time;\n    const hours: number = (time / 60) | 0;\n    const minutes: number = time % 60;\n    if (minutes < 10) {\n      return `${hours}:0${minutes}`;\n    }\n    return `${hours}:${minutes}`;\n  };\n\n  const groupByDay = (data: NodeProps[]): Record<number, NodeProps[]> => {\n    return data.reduce((acc: Record<number, NodeProps[]>, item) => {\n      if (!acc[item.vehicle]) {\n        acc[item.vehicle] = [];\n      }\n      acc[item.vehicle].push(item);\n      return acc;\n    }, {});\n  };\n  return (\n    <div>\n      <div className=\"mt-10\">\n        <h2 className=\"text-2xl font-bold text-center mb-6\">行程安排</h2>\n        <div className=\"bg-blue-100 p-6 rounded-lg shadow-lg\">\n          <ul className=\"space-y-4\">\n            {scheduleSites.map((node, index) => (\n              <li\n                key={index}\n                className=\"flex flex-col items-start bg-white p-4 border rounded-lg shadow-md hover:shadow-lg transition-shadow\"\n              >\n                <span className=\"text-lg font-semibold text-gray-700\">\n                  {node.name}\n                </span>\n                <span className=\"text-sm text-gray-500 mt-2\">\n                  到達時間: {transferArrivalTime(node.arrival)}\n                </span>\n              </li>\n            ))}\n          </ul>\n        </div>\n      </div>\n      <h2 className=\"text-2xl font-bold text-center mt-16\">行程詳情</h2>\n\n      <ul className=\"flex flex-wrap gap-8 justify-center items-center mt-5 mb-20\">\n        {Object.entries(groupByDay(scheduleSites)).map(([vehicle, items]) => (\n          <div\n            key={vehicle}\n            className=\"flex flex-col items-center justify-center p-4 border rounded-md\"\n          >\n            {items.map((node: NodeProps, index) => (\n              <React.Fragment key={index}>\n                {/* TravelCard */}\n                <li className=\"flex py-1\">\n                  <TravelCard\n                    title={node.name}\n                    imageSrc={`/images/${node.name.replace(/\\s/g, \"_\")}.jpg`}\n                    alt={node.name}\n                    arrive_time={transferArrivalTime(node.arrival)}\n                    stay_time={\n                      node.end_node || index == 0\n                        ? null\n                        : items[index + 1]?.arrival - node.travel - node.arrival\n                      //node.service\n                    }\n                  />\n                </li>\n\n                {/* TravelTimeArrow */}\n                {index !== items.length - 1 && (\n                  <div className=\"flex justify-center my-2\">\n                    <TravelTimeArrow travelTime={node.travel} />\n                  </div>\n                )}\n              </React.Fragment>\n            ))}\n          </div>\n        ))}\n      </ul>\n      {!isLoading && (\n        <div className=\"flex items-center justify-center gap-36 mt-5 mb-20\">\n          <form onSubmit={handleSubmit}>\n            <button\n              type=\"submit\"\n              className=\"bg-blue-600 text-white py-2 px-5 font-semibold rounded-lg shadow-md transition-transform transform hover:scale-105 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2\"\n            >\n              上一頁\n            </button>\n          </form>\n          <Link href=\"/\">\n            <button\n              type=\"submit\"\n              className=\"bg-green-600 text-white py-2 px-5 font-semibold rounded-lg shadow-md transition-transform transform hover:scale-105 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2\"\n            >\n              完成規劃\n            </button>\n          </Link>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ScheduleSitesComponent;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 641, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 647, "column": 0}, "map": {"version":3,"sources":["file:///home/thomas/langchain-crash-course/frontend/app/components/RecommendedSites.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect } from \"react\";\nimport Card from \"@/app/components/Cards\";\nimport data from \"@/data/sitesData.json\";\nimport ScheduleSitesComponent from \"./ScheduleSites\";\nimport Image from \"next/image\";\n\ninterface RecommendedSitesProps {\n  day: number;\n  preference: string;\n  onSubmit: () => void;\n}\n\nconst RecommendedSitesComponent: React.FC<RecommendedSitesProps> = ({\n  day,\n  preference,\n  onSubmit,\n}) => {\n  const [recommendedSites, setRecommendedSites] = useState<string[]>([]);\n  const [error, setError] = useState<string | null>(null);\n  const [selectedOptions, setSelectedOptions] = useState<string[]>([]);\n  const [submitted, setSubmitted] = useState<boolean>(false);\n  const [isLoading, setLoading] = useState<boolean>(true);\n  const toggleOption = (option: string) => {\n    setSelectedOptions((prevSelectedOptions) => {\n      const newSelectedOptions = prevSelectedOptions.includes(option)\n        ? prevSelectedOptions.filter((opt) => opt !== option)\n        : [...prevSelectedOptions, option];\n\n      return newSelectedOptions;\n    });\n  };\n\n  const handleSubmit = () => {\n    setSubmitted(!submitted); // Set submitted to true to show confirmation\n  };\n\n  const returnSubmit = () => {\n    handleSubmit();\n    setSelectedOptions([]);\n  };\n\n  useEffect(() => {\n    async function fetchRecommendedSites() {\n      try {\n        const response = await fetch(\"/api/recommend\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify({ day, preference }),\n        });\n\n        if (!response.ok) {\n          throw new Error(\"Failed to fetch recommended sites\");\n        }\n\n        const data = await response.json();\n        setLoading(false);\n        if (data.result && Array.isArray(data.result)) {\n          setRecommendedSites(data.result);\n        } else {\n          throw new Error(\"Unexpected data structure\");\n        }\n      } catch (error: unknown) {\n        if (error instanceof Error) {\n          setError(error.message);\n        } else {\n          setError(\"An unknown error occurred\");\n        }\n      }\n    }\n\n    fetchRecommendedSites();\n    setSelectedOptions([]);\n  }, [day, preference]); // Dependencies to re-fetch when day or preference changes\n\n  if (error) {\n    return <p>Error: {error}</p>;\n  }\n\n  return (\n    <>\n      {submitted ? (\n        <ScheduleSitesComponent\n          day={day}\n          sites={selectedOptions.join(\", \")}\n          start_time={480}\n          end_time={1200}\n          start_point=\"嘉義火車站\"\n          onSubmit={returnSubmit}\n        />\n      ) : (\n        <div>\n          {isLoading ? (\n            <div className=\"flex flex-col items-center mt-[10%] justify-center gap-8\">\n              <Image\n                src=\"/loading.gif\"\n                alt=\"Waiting for AI generation...\"\n                width={65}\n                height={65}\n                className=\"rounded-lg object-cover\"\n                unoptimized\n              />\n              <p className=\"text-lg object-cover\">Awaiting AI insight...</p>\n            </div>\n          ) : (\n            <>\n              <ul className=\"grid xl:grid-cols-4 lg:grid-cols-3 md:grid-cols-2 gap-8 mt-20 mb-20 mx-28\">\n                <h2 className=\"text-2xl font-bold text-center mt-4\">\n                  景點推薦\n                </h2>\n                {recommendedSites.map((site: string, index) => (\n                  <li key={index} className=\"flex py-1\">\n                    <Card\n                      title={site}\n                      openingTime={\n                        data[site as keyof typeof data][\"opening_hours\"][6]\n                      }\n                      onToggle={toggleOption}\n                    />\n                  </li>\n                ))}\n              </ul>\n              <div className=\"flex items-center justify-center gap-36 mt-5 mb-20\">\n                <form onSubmit={onSubmit}>\n                  <button\n                    type=\"submit\"\n                    className=\"bg-blue-600 text-white py-2 px-5 font-semibold rounded-lg shadow-md transition-transform transform hover:scale-105 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2\"\n                  >\n                    上一頁\n                  </button>\n                </form>\n                <form onSubmit={handleSubmit}>\n                  <button\n                    type=\"submit\"\n                    className=\"bg-green-600 text-white py-2 px-5 font-semibold rounded-lg shadow-md transition-transform transform hover:scale-105 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2\"\n                  >\n                    旅程規劃\n                  </button>\n                </form>\n                {/* <p>{selectedOptions.join(\", \")}</p> */}\n              </div>\n            </>\n          )}\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default RecommendedSitesComponent;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 861, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 867, "column": 0}, "map": {"version":3,"sources":["file:///home/thomas/langchain-crash-course/frontend/app/%28traveling%29/traveling/page.tsx"],"sourcesContent":["// pages/index.tsx\n\"use client\";\n\nimport React, { useState } from \"react\";\nimport Preference from \"@/app/components/Preference\";\nimport RecommendedSitesComponent from \"@/app/components/RecommendedSites\";\n\nconst HomePage: React.FC = () => {\n  const [selectedOptions, setSelectedOptions] = useState<string[]>([]);\n  const [submitted, setSubmitted] = useState<boolean>(false);\n\n  const handlePreferenceChange = (value: string[]) => {\n    setSelectedOptions(value);\n  };\n\n  const day = 1;\n\n  const handleSubmit = () => {\n    setSubmitted(!submitted); // Set submitted to true to show confirmation\n  };\n\n  const options: Array<string> = [\n    \"親子旅遊\",\n    \"文化古蹟\",\n    \"美食之旅\",\n    \"自然風光\",\n    \"冒險體驗\",\n    \"購物旅遊\",\n    \"療癒放鬆\",\n    \"生態旅遊\",\n    \"藝術之旅\",\n  ];\n\n  return (\n    <>\n      {submitted ? (\n        <RecommendedSitesComponent\n          day={day}\n          preference={selectedOptions.join(\"、\")}\n          onSubmit={handleSubmit}\n        />\n      ) : (\n        <div className=\"min-h-screen flex flex-col\">\n          <main className=\"flex-grow bg-gradient-to-b from-blue-50 to-blue-100\">\n            <div className=\"w-3/5 mx-auto flex flex-col justify-center items-center mt-20\">\n              <p className=\"content-center font-bold text-2xl mb-3\">\n                嘉義一日遊\n              </p>\n              <p className=\"content-center font-regular text-xl\">\n                起點: 嘉義火車站\n              </p>\n            </div>\n            <div className=\"w-full mx-auto mt-20 content-center flex flex-col items-center\">\n              <Preference\n                options={options}\n                onPreferenceChange={handlePreferenceChange}\n              />\n              <button\n                onClick={handleSubmit}\n                className=\"bg-blue-700 text-white mb-10 py-2 px-5 font-bold rounded-lg hover:shadow-xl hover:bg-blue-800\"\n              >\n                開始推薦\n              </button>\n            </div>\n          </main>\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default HomePage;\n"],"names":[],"mappings":"AAAA,kBAAkB;;;;;AAGlB;AACA;AACA;AAJA;;;;;AAMA,MAAM,WAAqB;IACzB,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAY,EAAE;IACnE,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAW;IAEpD,MAAM,yBAAyB,CAAC;QAC9B,mBAAmB;IACrB;IAEA,MAAM,MAAM;IAEZ,MAAM,eAAe;QACnB,aAAa,CAAC,YAAY,6CAA6C;IACzE;IAEA,MAAM,UAAyB;QAC7B;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IAED,qBACE;kBACG,0BACC,8OAAC,sIAAA,CAAA,UAAyB;YACxB,KAAK;YACL,YAAY,gBAAgB,IAAI,CAAC;YACjC,UAAU;;;;;iCAGZ,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAK,WAAU;;kCACd,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAE,WAAU;0CAAyC;;;;;;0CAGtD,8OAAC;gCAAE,WAAU;0CAAsC;;;;;;;;;;;;kCAIrD,8OAAC;wBAAI,WAAU;;0CACb,8OAAC,gIAAA,CAAA,UAAU;gCACT,SAAS;gCACT,oBAAoB;;;;;;0CAEtB,8OAAC;gCACC,SAAS;gCACT,WAAU;0CACX;;;;;;;;;;;;;;;;;;;;;;;;AASf;uCAEe"}},
    {"offset": {"line": 980, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}