{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/thomas/langchain-crash-course/frontend/app/components/Preference.tsx"],"sourcesContent":["\"use client\";\nimport { useState } from \"react\";\n\nconst Home: React.FC<{\n  options?: string[];\n  onPreferenceChange: (value: string[]) => void;\n}> = ({ options = [], onPreferenceChange }) => {\n  const [selectedOptions, setSelectedOptions] = useState<string[]>([]);\n\n  const toggleOption = (option: string) => {\n    setSelectedOptions((prevSelectedOptions) => {\n      const newSelectedOptions = prevSelectedOptions.includes(option)\n        ? prevSelectedOptions.filter((opt) => opt !== option)\n        : [...prevSelectedOptions, option];\n\n      return newSelectedOptions;\n    });\n    onPreferenceChange(selectedOptions);\n  };\n\n  const combinedText = selectedOptions.join(\"、\");\n\n  return (\n    <div className=\"flex flex-col items-center p-4\">\n      <h1 className=\"text-xl font-bold mb-4\">偏好選擇</h1>\n      <div className=\"flex flex-wrap gap-4 justify-center\">\n        {options.map((option, index) => (\n          <div\n            key={index}\n            onClick={() => toggleOption(option)}\n            className={`cursor-pointer p-4 border rounded-md transition ${\n              selectedOptions.includes(option)\n                ? \"bg-blue-500 text-white\"\n                : \"bg-gray-200 text-gray-800\"\n            } hover:shadow-lg`}\n          >\n            {option}\n          </div>\n        ))}\n      </div>\n\n      {combinedText && (\n        <div className=\"mt-4 p-4 bg-gray-100 rounded-md text-gray-800\">\n          <strong>偏好: </strong> {combinedText}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Home;\n"],"names":[],"mappings":";;;;AACA;;;AADA;;AAGA,MAAM,OAGD,CAAC,EAAE,UAAU,EAAE,EAAE,kBAAkB,EAAE;;IACxC,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAY,EAAE;IAEnE,MAAM,eAAe,CAAC;QACpB,mBAAmB,CAAC;YAClB,MAAM,qBAAqB,oBAAoB,QAAQ,CAAC,UACpD,oBAAoB,MAAM,CAAC,CAAC,MAAQ,QAAQ,UAC5C;mBAAI;gBAAqB;aAAO;YAEpC,OAAO;QACT;QACA,mBAAmB;IACrB;IAEA,MAAM,eAAe,gBAAgB,IAAI,CAAC;IAE1C,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAG,WAAU;0BAAyB;;;;;;0BACvC,6LAAC;gBAAI,WAAU;0BACZ,QAAQ,GAAG,CAAC,CAAC,QAAQ,sBACpB,6LAAC;wBAEC,SAAS,IAAM,aAAa;wBAC5B,WAAW,CAAC,gDAAgD,EAC1D,gBAAgB,QAAQ,CAAC,UACrB,2BACA,4BACL,gBAAgB,CAAC;kCAEjB;uBARI;;;;;;;;;;YAaV,8BACC,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;kCAAO;;;;;;oBAAa;oBAAE;;;;;;;;;;;;;AAKjC;GA7CM;KAAA;uCA+CS"}},
    {"offset": {"line": 90, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 96, "column": 0}, "map": {"version":3,"sources":["file:///home/thomas/langchain-crash-course/frontend/app/components/Switch.tsx"],"sourcesContent":["import React from \"react\";\r\n\r\ninterface SwitchProps {\r\n  isOn: boolean;\r\n  handleToggle: () => void;\r\n  id: string;\r\n}\r\n\r\nconst Switch: React.FC<SwitchProps> = ({ isOn, handleToggle, id }) => {\r\n  return (\r\n    <div className=\"relative w-12 h-6\">\r\n      <input\r\n        checked={isOn}\r\n        onChange={handleToggle}\r\n        className=\"absolute w-0 h-0 opacity-0\"\r\n        id={id}\r\n        type=\"checkbox\"\r\n      />\r\n      <label\r\n        htmlFor={id}\r\n        className={`flex items-center justify-between w-full h-full rounded-full transition-colors duration-200 cursor-pointer ${\r\n          isOn ? \"bg-green-500\" : \"bg-gray-400\"\r\n        }`}\r\n      >\r\n        <span\r\n          className={`absolute top-1 left-1 w-4 h-4 rounded-full bg-white shadow-md transform transition-transform duration-200 ${\r\n            isOn ? \"translate-x-6\" : \"\"\r\n          }`}\r\n        />\r\n      </label>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Switch;\r\n"],"names":[],"mappings":";;;;;AAQA,MAAM,SAAgC,CAAC,EAAE,IAAI,EAAE,YAAY,EAAE,EAAE,EAAE;IAC/D,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBACC,SAAS;gBACT,UAAU;gBACV,WAAU;gBACV,IAAI;gBACJ,MAAK;;;;;;0BAEP,6LAAC;gBACC,SAAS;gBACT,WAAW,CAAC,2GAA2G,EACrH,OAAO,iBAAiB,eACxB;0BAEF,cAAA,6LAAC;oBACC,WAAW,CAAC,0GAA0G,EACpH,OAAO,kBAAkB,IACzB;;;;;;;;;;;;;;;;;AAKZ;KAxBM;uCA0BS"}},
    {"offset": {"line": 145, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 151, "column": 0}, "map": {"version":3,"sources":["file:///home/thomas/langchain-crash-course/frontend/app/components/Cards.tsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport Image from \"next/image\";\nimport Switch from \"@/app/components/Switch\";\n\ninterface CardProps {\n  title: string;\n  description: string;\n  imageSrc: string;\n  alt: string;\n  onToggle: (value: string) => void;\n}\n\nconst Card: React.FC<CardProps> = ({\n  title,\n  description,\n  imageSrc,\n  alt,\n  onToggle,\n}) => {\n  const [detail, setDetail] = useState<boolean>(false);\n  const [isOn, setIsOn] = useState<boolean>(false);\n\n  const onSubmit = () => setDetail(!detail);\n  const handleToggle = () => {\n    setIsOn(!isOn);\n    onToggle(title);\n  };\n\n  return (\n    <>\n      {detail ? (\n        <div className=\"flex flex-col items-start p-4 bg-white rounded-lg shadow-md text-black h-full\">\n          <Image\n            src={imageSrc}\n            alt={alt}\n            width={600}\n            height={350}\n            className=\"rounded-lg object-cover w-full h-auto max-h-[300px] sm:max-h-[400px]\"\n            onError={(e) => {\n              e.currentTarget.src = \"/images/placeholder.jpg\"; // Replace with your placeholder image\n            }}\n          />\n          <h2 className=\"text-lg font-bold mt-2 ml-2\">{title}</h2>\n          <p className=\"ml-2 mt-1\">{description}</p>\n          <form onSubmit={onSubmit}>\n            <button\n              type=\"submit\"\n              className=\"text-lg mt-2 font-semibold  hover:text-blue-500\"\n            >\n              Go Back\n            </button>\n          </form>\n        </div>\n      ) : (\n        <div className=\"flex flex-col items-center p-4 bg-white rounded-lg shadow-md text-black h-full w-full\">\n          <h2 className=\"text-lg font-bold mt-2 ml-2 content-center\">\n            {title}\n          </h2>\n          <div className=\"flex flex-col sm:flex-row items-center sm:space-x-4 mt-4 space-y-2 sm:space-y-0\">\n            <Switch\n              isOn={isOn}\n              handleToggle={handleToggle}\n              id={`switch-${title}`}\n            />\n            <form onSubmit={onSubmit}>\n              <button\n                type=\"submit\"\n                className=\"font-semibold  hover:text-blue-500\"\n              >\n                Learn more...\n              </button>\n            </form>\n          </div>\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default Card;\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;;;AAUA,MAAM,OAA4B,CAAC,EACjC,KAAK,EACL,WAAW,EACX,QAAQ,EACR,GAAG,EACH,QAAQ,EACT;;IACC,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAW;IAC9C,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAW;IAE1C,MAAM,WAAW,IAAM,UAAU,CAAC;IAClC,MAAM,eAAe;QACnB,QAAQ,CAAC;QACT,SAAS;IACX;IAEA,qBACE;kBACG,uBACC,6LAAC;YAAI,WAAU;;8BACb,6LAAC,gIAAA,CAAA,UAAK;oBACJ,KAAK;oBACL,KAAK;oBACL,OAAO;oBACP,QAAQ;oBACR,WAAU;oBACV,SAAS,CAAC;wBACR,EAAE,aAAa,CAAC,GAAG,GAAG,2BAA2B,sCAAsC;oBACzF;;;;;;8BAEF,6LAAC;oBAAG,WAAU;8BAA+B;;;;;;8BAC7C,6LAAC;oBAAE,WAAU;8BAAa;;;;;;8BAC1B,6LAAC;oBAAK,UAAU;8BACd,cAAA,6LAAC;wBACC,MAAK;wBACL,WAAU;kCACX;;;;;;;;;;;;;;;;iCAML,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAG,WAAU;8BACX;;;;;;8BAEH,6LAAC;oBAAI,WAAU;;sCACb,6LAAC,+HAAA,CAAA,UAAM;4BACL,MAAM;4BACN,cAAc;4BACd,IAAI,CAAC,OAAO,EAAE,OAAO;;;;;;sCAEvB,6LAAC;4BAAK,UAAU;sCACd,cAAA,6LAAC;gCACC,MAAK;gCACL,WAAU;0CACX;;;;;;;;;;;;;;;;;;;;;;;;AASf;GAjEM;KAAA;uCAmES"}},
    {"offset": {"line": 288, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 299, "column": 0}, "map": {"version":3,"sources":["file:///home/thomas/langchain-crash-course/frontend/app/components/TravelCard.tsx"],"sourcesContent":["import React from \"react\";\nimport Image from \"next/image\";\n\ninterface TravelCardProps {\n  title: string;\n  imageSrc: string;\n  alt: string;\n  arrive_time: string;\n  stay_time: number | null;\n}\n\nconst TravelCard: React.FC<TravelCardProps> = ({\n  title,\n  imageSrc,\n  alt,\n  arrive_time,\n  stay_time,\n}) => {\n  function transferTime(time: number) {\n    const hours = Math.floor(time / 60);\n    const minutes = time % 60;\n    if (hours === 0) {\n      return `${minutes} 分鐘`;\n    }\n    if (minutes === 0) {\n      return `${hours} 小時`;\n    }\n    return `${hours} 小時  ${minutes} 分鐘`;\n  }\n  const timeParts = arrive_time.split(\":\");\n  const hour = timeParts.length > 1 ? parseInt(timeParts[0], 10) : 0;\n  const isAfternoon = hour > 12;\n\n  return (\n    <div\n      className={`flex flex-col items-start p-4 rounded-lg shadow-md text-black h-full ${\n        isAfternoon ? \"bg-yellow-200\" : \"bg-orange-100\"\n      }`}\n    >\n      <h2 className=\"text-xl font-bold mt-2 ml-2 mb-1\">{title}</h2>\n      <Image\n        src={imageSrc}\n        alt={alt}\n        width={300}\n        height={175}\n        className=\"rounded-lg object-cover\"\n      />\n      <p className=\"font-medium text-lg mb-[1.5px] mt-0.5\">\n        到達時間: {arrive_time}\n      </p>\n      {stay_time !== null && (\n        <p className=\"font-medium text-lg \">\n          預估停留時間: {transferTime(stay_time)}\n        </p>\n      )}\n    </div>\n  );\n};\n\nexport default TravelCard;\n\nexport type { TravelCardProps };\n"],"names":[],"mappings":";;;;AACA;;;AAUA,MAAM,aAAwC,CAAC,EAC7C,KAAK,EACL,QAAQ,EACR,GAAG,EACH,WAAW,EACX,SAAS,EACV;IACC,SAAS,aAAa,IAAY;QAChC,MAAM,QAAQ,KAAK,KAAK,CAAC,OAAO;QAChC,MAAM,UAAU,OAAO;QACvB,IAAI,UAAU,GAAG;YACf,OAAO,GAAG,QAAQ,GAAG,CAAC;QACxB;QACA,IAAI,YAAY,GAAG;YACjB,OAAO,GAAG,MAAM,GAAG,CAAC;QACtB;QACA,OAAO,GAAG,MAAM,KAAK,EAAE,QAAQ,GAAG,CAAC;IACrC;IACA,MAAM,YAAY,YAAY,KAAK,CAAC;IACpC,MAAM,OAAO,UAAU,MAAM,GAAG,IAAI,SAAS,SAAS,CAAC,EAAE,EAAE,MAAM;IACjE,MAAM,cAAc,OAAO;IAE3B,qBACE,6LAAC;QACC,WAAW,CAAC,qEAAqE,EAC/E,cAAc,kBAAkB,iBAChC;;0BAEF,6LAAC;gBAAG,WAAU;0BAAoC;;;;;;0BAClD,6LAAC,gIAAA,CAAA,UAAK;gBACJ,KAAK;gBACL,KAAK;gBACL,OAAO;gBACP,QAAQ;gBACR,WAAU;;;;;;0BAEZ,6LAAC;gBAAE,WAAU;;oBAAwC;oBAC5C;;;;;;;YAER,cAAc,sBACb,6LAAC;gBAAE,WAAU;;oBAAuB;oBACzB,aAAa;;;;;;;;;;;;;AAKhC;KA9CM;uCAgDS"}},
    {"offset": {"line": 379, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 385, "column": 0}, "map": {"version":3,"sources":["file:///home/thomas/langchain-crash-course/frontend/app/components/TravelTimeArrow.tsx"],"sourcesContent":["import React from \"react\";\n\ninterface TravelTimeArrowProps {\n  travelTime: number;\n}\n\nconst TravelTimeArrow: React.FC<TravelTimeArrowProps> = ({ travelTime }) => {\n  const transferArrivalTime = (time: number) => {\n    const hours: number = (time / 60) | 0;\n    const minutes: number = time % 60;\n    if (hours === 0) {\n      return `${minutes}分`;\n    }\n    return `${hours}時 ${minutes}分`;\n  };\n\n  return (\n    <div className=\"flex items-center\">\n      {/* Arrow */}\n      <div className=\"flex flex-col items-center\">\n        {/* Arrow Line */}\n        <div className=\"w-2 h-20 bg-blue-500\"></div>\n        {/* Arrow Head */}\n        <div className=\"w-0 h-0 border-l-[12px] border-l-transparent border-r-[12px] border-r-transparent border-t-[12px] border-t-blue-500\"></div>\n      </div>\n\n      {/* Travel Time Label */}\n      <div className=\"text-2xl text-gray-800 font-semibold ml-2 mr-auto\">\n        {transferArrivalTime(travelTime)}\n      </div>\n    </div>\n  );\n};\n\nexport default TravelTimeArrow;\n"],"names":[],"mappings":";;;;;AAMA,MAAM,kBAAkD,CAAC,EAAE,UAAU,EAAE;IACrE,MAAM,sBAAsB,CAAC;QAC3B,MAAM,QAAgB,AAAC,OAAO,KAAM;QACpC,MAAM,UAAkB,OAAO;QAC/B,IAAI,UAAU,GAAG;YACf,OAAO,GAAG,QAAQ,CAAC,CAAC;QACtB;QACA,OAAO,GAAG,MAAM,EAAE,EAAE,QAAQ,CAAC,CAAC;IAChC;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BAEb,6LAAC;gBAAI,WAAU;;kCAEb,6LAAC;wBAAI,WAAU;;;;;;kCAEf,6LAAC;wBAAI,WAAU;;;;;;;;;;;;0BAIjB,6LAAC;gBAAI,WAAU;0BACZ,oBAAoB;;;;;;;;;;;;AAI7B;KA1BM;uCA4BS"}},
    {"offset": {"line": 447, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 453, "column": 0}, "map": {"version":3,"sources":["file:///home/thomas/langchain-crash-course/frontend/app/components/ScheduleSites.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect } from \"react\";\nimport TravelCard from \"./TravelCard\";\nimport TravelTimeArrow from \"./TravelTimeArrow\";\nimport Link from \"next/link\";\n\ninterface ScheduleSitesProps {\n  day: number;\n  sites: string;\n  start_time: number;\n  end_time: number;\n  start_point: string;\n  onSubmit: () => void;\n}\n\ninterface NodeProps {\n  arrival: number;\n  end_node: boolean;\n  name: string;\n  service: number;\n  travel: number;\n  vehicle: number;\n}\nconst ScheduleSitesComponent: React.FC<ScheduleSitesProps> = ({\n  day,\n  sites,\n  start_time,\n  end_time,\n  start_point,\n  onSubmit,\n}) => {\n  const [scheduleSites, setScheduleSites] = useState<NodeProps[]>([]);\n  const [error, setError] = useState<string | null>(null);\n  const [isLoading, setLoading] = useState<boolean>(true);\n\n  const handleSubmit = () => {\n    onSubmit();\n    setError(null);\n    setScheduleSites([]);\n  };\n  useEffect(() => {\n    async function fetchScheduleSites() {\n      try {\n        const response = await fetch(\"/api/routing\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify({\n            day,\n            sites,\n            start_time,\n            end_time,\n            start_point,\n          }),\n        });\n\n        if (!response.ok) {\n          throw new Error(\"Failed to fetch scheduled route\");\n        }\n\n        const data = await response.json();\n\n        setLoading(false);\n        if (data.result && Array.isArray(data.result)) {\n          setScheduleSites(data.result);\n        } else {\n          throw new Error(\"Unexpected data structure\");\n        }\n      } catch (error: unknown) {\n        if (error instanceof Error) {\n          setError(error.message);\n        } else {\n          setError(\"An unknown error occurred\");\n        }\n      }\n    }\n\n    fetchScheduleSites();\n  }, [day, sites, start_time, end_time, start_point]); // Dependencies to re-fetch when day or preference changes\n\n  if (error) {\n    return <p>Error: {error}</p>;\n  }\n\n  const transferArrivalTime = (time: number) => {\n    time = time + start_time;\n    const hours: number = (time / 60) | 0;\n    const minutes: number = time % 60;\n    if (minutes < 10) {\n      return `${hours}:0${minutes}`;\n    }\n    return `${hours}:${minutes}`;\n  };\n\n  const groupByDay = (data: NodeProps[]): Record<number, NodeProps[]> => {\n    return data.reduce((acc: Record<number, NodeProps[]>, item) => {\n      if (!acc[item.vehicle]) {\n        acc[item.vehicle] = [];\n      }\n      acc[item.vehicle].push(item);\n      return acc;\n    }, {});\n  };\n  return (\n    <div>\n      <div className=\"mt-10\">\n        <h2 className=\"text-2xl font-bold text-center mb-6\">行程安排</h2>\n        <div className=\"bg-blue-100 p-6 rounded-lg shadow-lg\">\n          <ul className=\"space-y-4\">\n            {scheduleSites.map((node, index) => (\n              <li\n                key={index}\n                className=\"flex flex-col items-start bg-white p-4 border rounded-lg shadow-md hover:shadow-lg transition-shadow\"\n              >\n                <span className=\"text-lg font-semibold text-gray-700\">\n                  {node.name}\n                </span>\n                <span className=\"text-sm text-gray-500 mt-2\">\n                  到達時間: {transferArrivalTime(node.arrival)}\n                </span>\n              </li>\n            ))}\n          </ul>\n        </div>\n      </div>\n      <h2 className=\"text-2xl font-bold text-center mt-16\">行程詳情</h2>\n\n      <ul className=\"flex flex-wrap gap-8 justify-center items-center mt-5 mb-20\">\n        {Object.entries(groupByDay(scheduleSites)).map(([vehicle, items]) => (\n          <div\n            key={vehicle}\n            className=\"flex flex-col items-center justify-center p-4 border rounded-md\"\n          >\n            {items.map((node: NodeProps, index) => (\n              <React.Fragment key={index}>\n                {/* TravelCard */}\n                <li className=\"flex py-1\">\n                  <TravelCard\n                    title={node.name}\n                    imageSrc={`/images/${node.name}.jpg`}\n                    alt={node.name}\n                    arrive_time={transferArrivalTime(node.arrival)}\n                    stay_time={\n                      node.end_node || index == 0\n                        ? null\n                        : items[index + 1]?.arrival - node.travel - node.arrival\n                    }\n                  />\n                </li>\n\n                {/* TravelTimeArrow */}\n                {index !== items.length - 1 && (\n                  <div className=\"flex justify-center my-2\">\n                    <TravelTimeArrow travelTime={node.travel} />\n                  </div>\n                )}\n              </React.Fragment>\n            ))}\n          </div>\n        ))}\n      </ul>\n      {!isLoading && (\n        <div className=\"flex items-center justify-center gap-36 mt-5 mb-20\">\n          <form onSubmit={handleSubmit}>\n            <button\n              type=\"submit\"\n              className=\"bg-blue-600 text-white py-2 px-5 font-semibold rounded-lg shadow-md transition-transform transform hover:scale-105 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2\"\n            >\n              上一頁\n            </button>\n          </form>\n          <Link href=\"/\">\n            <button\n              type=\"submit\"\n              className=\"bg-green-600 text-white py-2 px-5 font-semibold rounded-lg shadow-md transition-transform transform hover:scale-105 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2\"\n            >\n              完成規劃\n            </button>\n          </Link>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ScheduleSitesComponent;\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;;;AALA;;;;;AAwBA,MAAM,yBAAuD,CAAC,EAC5D,GAAG,EACH,KAAK,EACL,UAAU,EACV,QAAQ,EACR,WAAW,EACX,QAAQ,EACT;;IACC,MAAM,CAAC,eAAe,iBAAiB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAe,EAAE;IAClE,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAiB;IAClD,MAAM,CAAC,WAAW,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAW;IAElD,MAAM,eAAe;QACnB;QACA,SAAS;QACT,iBAAiB,EAAE;IACrB;IACA,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;4CAAE;YACR,eAAe;gBACb,IAAI;oBACF,MAAM,WAAW,MAAM,MAAM,gBAAgB;wBAC3C,QAAQ;wBACR,SAAS;4BACP,gBAAgB;wBAClB;wBACA,MAAM,KAAK,SAAS,CAAC;4BACnB;4BACA;4BACA;4BACA;4BACA;wBACF;oBACF;oBAEA,IAAI,CAAC,SAAS,EAAE,EAAE;wBAChB,MAAM,IAAI,MAAM;oBAClB;oBAEA,MAAM,OAAO,MAAM,SAAS,IAAI;oBAEhC,WAAW;oBACX,IAAI,KAAK,MAAM,IAAI,MAAM,OAAO,CAAC,KAAK,MAAM,GAAG;wBAC7C,iBAAiB,KAAK,MAAM;oBAC9B,OAAO;wBACL,MAAM,IAAI,MAAM;oBAClB;gBACF,EAAE,OAAO,OAAgB;oBACvB,IAAI,iBAAiB,OAAO;wBAC1B,SAAS,MAAM,OAAO;oBACxB,OAAO;wBACL,SAAS;oBACX;gBACF;YACF;YAEA;QACF;2CAAG;QAAC;QAAK;QAAO;QAAY;QAAU;KAAY,GAAG,0DAA0D;IAE/G,IAAI,OAAO;QACT,qBAAO,6LAAC;;gBAAE;gBAAQ;;;;;;;IACpB;IAEA,MAAM,sBAAsB,CAAC;QAC3B,OAAO,OAAO;QACd,MAAM,QAAgB,AAAC,OAAO,KAAM;QACpC,MAAM,UAAkB,OAAO;QAC/B,IAAI,UAAU,IAAI;YAChB,OAAO,GAAG,MAAM,EAAE,EAAE,SAAS;QAC/B;QACA,OAAO,GAAG,MAAM,CAAC,EAAE,SAAS;IAC9B;IAEA,MAAM,aAAa,CAAC;QAClB,OAAO,KAAK,MAAM,CAAC,CAAC,KAAkC;YACpD,IAAI,CAAC,GAAG,CAAC,KAAK,OAAO,CAAC,EAAE;gBACtB,GAAG,CAAC,KAAK,OAAO,CAAC,GAAG,EAAE;YACxB;YACA,GAAG,CAAC,KAAK,OAAO,CAAC,CAAC,IAAI,CAAC;YACvB,OAAO;QACT,GAAG,CAAC;IACN;IACA,qBACE,6LAAC;;0BACC,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAG,WAAU;kCAAsC;;;;;;kCACpD,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BAAG,WAAU;sCACX,cAAc,GAAG,CAAC,CAAC,MAAM,sBACxB,6LAAC;oCAEC,WAAU;;sDAEV,6LAAC;4CAAK,WAAU;sDACb,KAAK,IAAI;;;;;;sDAEZ,6LAAC;4CAAK,WAAU;;gDAA6B;gDACpC,oBAAoB,KAAK,OAAO;;;;;;;;mCAPpC;;;;;;;;;;;;;;;;;;;;;0BAcf,6LAAC;gBAAG,WAAU;0BAAuC;;;;;;0BAErD,6LAAC;gBAAG,WAAU;0BACX,OAAO,OAAO,CAAC,WAAW,gBAAgB,GAAG,CAAC,CAAC,CAAC,SAAS,MAAM,iBAC9D,6LAAC;wBAEC,WAAU;kCAET,MAAM,GAAG,CAAC,CAAC,MAAiB,sBAC3B,6LAAC,6JAAA,CAAA,UAAK,CAAC,QAAQ;;kDAEb,6LAAC;wCAAG,WAAU;kDACZ,cAAA,6LAAC,mIAAA,CAAA,UAAU;4CACT,OAAO,KAAK,IAAI;4CAChB,UAAU,CAAC,QAAQ,EAAE,KAAK,IAAI,CAAC,IAAI,CAAC;4CACpC,KAAK,KAAK,IAAI;4CACd,aAAa,oBAAoB,KAAK,OAAO;4CAC7C,WACE,KAAK,QAAQ,IAAI,SAAS,IACtB,OACA,KAAK,CAAC,QAAQ,EAAE,EAAE,UAAU,KAAK,MAAM,GAAG,KAAK,OAAO;;;;;;;;;;;oCAM/D,UAAU,MAAM,MAAM,GAAG,mBACxB,6LAAC;wCAAI,WAAU;kDACb,cAAA,6LAAC,wIAAA,CAAA,UAAe;4CAAC,YAAY,KAAK,MAAM;;;;;;;;;;;;+BAnBzB;;;;;uBAJlB;;;;;;;;;;YA+BV,CAAC,2BACA,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAK,UAAU;kCACd,cAAA,6LAAC;4BACC,MAAK;4BACL,WAAU;sCACX;;;;;;;;;;;kCAIH,6LAAC,+HAAA,CAAA,UAAI;wBAAC,MAAK;kCACT,cAAA,6LAAC;4BACC,MAAK;4BACL,WAAU;sCACX;;;;;;;;;;;;;;;;;;;;;;;AAQb;GAjKM;KAAA;uCAmKS"}},
    {"offset": {"line": 731, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 737, "column": 0}, "map": {"version":3,"sources":["file:///home/thomas/langchain-crash-course/frontend/app/components/RecommendedSites.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect } from \"react\";\nimport Card from \"@/app/components/Cards\";\nimport data from \"@/data/sitesData.json\";\nimport ScheduleSitesComponent from \"./ScheduleSites\";\n\ninterface RecommendedSitesProps {\n  day: number;\n  preference: string;\n  onSubmit: () => void;\n}\n\nconst RecommendedSitesComponent: React.FC<RecommendedSitesProps> = ({\n  day,\n  preference,\n  onSubmit,\n}) => {\n  const [recommendedSites, setRecommendedSites] = useState<string[]>([]);\n  const [error, setError] = useState<string | null>(null);\n  const [selectedOptions, setSelectedOptions] = useState<string[]>([]);\n  const [submitted, setSubmitted] = useState<boolean>(false);\n  const [isLoading, setLoading] = useState<boolean>(true);\n  const toggleOption = (option: string) => {\n    setSelectedOptions((prevSelectedOptions) => {\n      const newSelectedOptions = prevSelectedOptions.includes(option)\n        ? prevSelectedOptions.filter((opt) => opt !== option)\n        : [...prevSelectedOptions, option];\n\n      return newSelectedOptions;\n    });\n  };\n\n  const handleSubmit = () => {\n    setSubmitted(!submitted); // Set submitted to true to show confirmation\n  };\n\n  const returnSubmit = () => {\n    handleSubmit();\n    setSelectedOptions([]);\n  };\n\n  useEffect(() => {\n    async function fetchRecommendedSites() {\n      try {\n        const response = await fetch(\"/api/recommend\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify({ day, preference }),\n        });\n\n        if (!response.ok) {\n          throw new Error(\"Failed to fetch recommended sites\");\n        }\n\n        const data = await response.json();\n        setLoading(false);\n        if (data.result && Array.isArray(data.result)) {\n          setRecommendedSites(data.result);\n        } else {\n          throw new Error(\"Unexpected data structure\");\n        }\n      } catch (error: unknown) {\n        if (error instanceof Error) {\n          setError(error.message);\n        } else {\n          setError(\"An unknown error occurred\");\n        }\n      }\n    }\n\n    fetchRecommendedSites();\n    setSelectedOptions([]);\n  }, [day, preference]); // Dependencies to re-fetch when day or preference changes\n\n  if (error) {\n    return <p>Error: {error}</p>;\n  }\n\n  return (\n    <>\n      {submitted ? (\n        <ScheduleSitesComponent\n          day={day}\n          sites={selectedOptions.join(\", \")}\n          start_time={480}\n          end_time={1200}\n          start_point=\"嘉義火車站\"\n          onSubmit={returnSubmit}\n        />\n      ) : (\n        <div>\n          <ul className=\"grid xl:grid-cols-4 lg:grid-cols-3 md:grid-cols-2 gap-8 mt-20 mb-20 mx-28\">\n            {recommendedSites.map((site: string, index) => (\n              <li key={index} className=\"flex py-1\">\n                <Card\n                  title={site}\n                  description={data[site as keyof typeof data][\"content\"]}\n                  imageSrc={`/images/${site}.jpg`}\n                  alt={site}\n                  onToggle={toggleOption}\n                />\n              </li>\n            ))}\n          </ul>\n          {!isLoading && (\n            <div className=\"flex items-center justify-center gap-36 mt-5 mb-20\">\n              <form onSubmit={onSubmit}>\n                <button\n                  type=\"submit\"\n                  className=\"bg-blue-600 text-white py-2 px-5 font-semibold rounded-lg shadow-md transition-transform transform hover:scale-105 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2\"\n                >\n                  上一頁\n                </button>\n              </form>\n\n              <form onSubmit={handleSubmit}>\n                <button\n                  type=\"submit\"\n                  className=\"bg-green-600 text-white py-2 px-5 font-semibold rounded-lg shadow-md transition-transform transform hover:scale-105 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2\"\n                >\n                  旅程規劃\n                </button>\n              </form>\n            </div>\n          )}\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default RecommendedSitesComponent;\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;;;AALA;;;;;AAaA,MAAM,4BAA6D,CAAC,EAClE,GAAG,EACH,UAAU,EACV,QAAQ,EACT;;IACC,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAY,EAAE;IACrE,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAiB;IAClD,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAY,EAAE;IACnE,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAW;IACpD,MAAM,CAAC,WAAW,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAW;IAClD,MAAM,eAAe,CAAC;QACpB,mBAAmB,CAAC;YAClB,MAAM,qBAAqB,oBAAoB,QAAQ,CAAC,UACpD,oBAAoB,MAAM,CAAC,CAAC,MAAQ,QAAQ,UAC5C;mBAAI;gBAAqB;aAAO;YAEpC,OAAO;QACT;IACF;IAEA,MAAM,eAAe;QACnB,aAAa,CAAC,YAAY,6CAA6C;IACzE;IAEA,MAAM,eAAe;QACnB;QACA,mBAAmB,EAAE;IACvB;IAEA,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;+CAAE;YACR,eAAe;gBACb,IAAI;oBACF,MAAM,WAAW,MAAM,MAAM,kBAAkB;wBAC7C,QAAQ;wBACR,SAAS;4BACP,gBAAgB;wBAClB;wBACA,MAAM,KAAK,SAAS,CAAC;4BAAE;4BAAK;wBAAW;oBACzC;oBAEA,IAAI,CAAC,SAAS,EAAE,EAAE;wBAChB,MAAM,IAAI,MAAM;oBAClB;oBAEA,MAAM,OAAO,MAAM,SAAS,IAAI;oBAChC,WAAW;oBACX,IAAI,KAAK,MAAM,IAAI,MAAM,OAAO,CAAC,KAAK,MAAM,GAAG;wBAC7C,oBAAoB,KAAK,MAAM;oBACjC,OAAO;wBACL,MAAM,IAAI,MAAM;oBAClB;gBACF,EAAE,OAAO,OAAgB;oBACvB,IAAI,iBAAiB,OAAO;wBAC1B,SAAS,MAAM,OAAO;oBACxB,OAAO;wBACL,SAAS;oBACX;gBACF;YACF;YAEA;YACA,mBAAmB,EAAE;QACvB;8CAAG;QAAC;QAAK;KAAW,GAAG,0DAA0D;IAEjF,IAAI,OAAO;QACT,qBAAO,6LAAC;;gBAAE;gBAAQ;;;;;;;IACpB;IAEA,qBACE;kBACG,0BACC,6LAAC,sIAAA,CAAA,UAAsB;YACrB,KAAK;YACL,OAAO,gBAAgB,IAAI,CAAC;YAC5B,YAAY;YACZ,UAAU;YACV,aAAY;YACZ,UAAU;;;;;iCAGZ,6LAAC;;8BACC,6LAAC;oBAAG,WAAU;8BACX,iBAAiB,GAAG,CAAC,CAAC,MAAc,sBACnC,6LAAC;4BAAe,WAAU;sCACxB,cAAA,6LAAC,8HAAA,CAAA,UAAI;gCACH,OAAO;gCACP,aAAa,yFAAA,CAAA,UAAI,CAAC,KAA0B,CAAC,UAAU;gCACvD,UAAU,CAAC,QAAQ,EAAE,KAAK,IAAI,CAAC;gCAC/B,KAAK;gCACL,UAAU;;;;;;2BANL;;;;;;;;;;gBAWZ,CAAC,2BACA,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAK,UAAU;sCACd,cAAA,6LAAC;gCACC,MAAK;gCACL,WAAU;0CACX;;;;;;;;;;;sCAKH,6LAAC;4BAAK,UAAU;sCACd,cAAA,6LAAC;gCACC,MAAK;gCACL,WAAU;0CACX;;;;;;;;;;;;;;;;;;;;;;;;AAUjB;GAvHM;KAAA;uCAyHS"}},
    {"offset": {"line": 922, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 928, "column": 0}, "map": {"version":3,"sources":["file:///home/thomas/langchain-crash-course/frontend/app/%28traveling%29/traveling/page.tsx"],"sourcesContent":["// pages/index.tsx\n\"use client\";\n\nimport React, { useState } from \"react\";\nimport Preference from \"@/app/components/Preference\";\nimport RecommendedSitesComponent from \"@/app/components/RecommendedSites\";\n\nconst HomePage: React.FC = () => {\n  const [selectedOptions, setSelectedOptions] = useState<string[]>([]);\n  const [submitted, setSubmitted] = useState<boolean>(false);\n\n  const handlePreferenceChange = (value: string[]) => {\n    setSelectedOptions(value);\n  };\n\n  const day = 1;\n\n  const handleSubmit = () => {\n    setSubmitted(!submitted); // Set submitted to true to show confirmation\n  };\n\n  const options: Array<string> = [\n    \"親子旅遊\",\n    \"文化古蹟\",\n    \"美食之旅\",\n    \"自然風光\",\n    \"冒險體驗\",\n    \"購物旅遊\",\n    \"療癒放鬆\",\n    \"生態旅遊\",\n    \"藝術之旅\",\n  ];\n\n  return (\n    <>\n      {submitted ? (\n        <RecommendedSitesComponent\n          day={day}\n          preference={selectedOptions.join(\"、\")}\n          onSubmit={handleSubmit}\n        />\n      ) : (\n        <div className=\"min-h-screen flex flex-col\">\n          <main className=\"flex-grow bg-gradient-to-b from-blue-50 to-blue-100\">\n            <div className=\"w-3/5 mx-auto flex flex-col justify-center items-center mt-20\">\n              <p className=\"content-center font-bold text-2xl mb-3\">\n                嘉義一日遊\n              </p>\n              <p className=\"content-center font-regular text-xl\">\n                起點: 嘉義火車站\n              </p>\n            </div>\n            <div className=\"w-full mx-auto mt-20 content-center flex flex-col items-center\">\n              <Preference\n                options={options}\n                onPreferenceChange={handlePreferenceChange}\n              />\n              <button\n                onClick={handleSubmit}\n                className=\"bg-blue-700 text-white mb-10 py-2 px-5 font-bold rounded-lg hover:shadow-xl hover:bg-blue-800\"\n              >\n                開始推薦\n              </button>\n            </div>\n          </main>\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default HomePage;\n"],"names":[],"mappings":"AAAA,kBAAkB;;;;;AAGlB;AACA;AACA;;;AAJA;;;;AAMA,MAAM,WAAqB;;IACzB,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAY,EAAE;IACnE,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAW;IAEpD,MAAM,yBAAyB,CAAC;QAC9B,mBAAmB;IACrB;IAEA,MAAM,MAAM;IAEZ,MAAM,eAAe;QACnB,aAAa,CAAC,YAAY,6CAA6C;IACzE;IAEA,MAAM,UAAyB;QAC7B;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IAED,qBACE;kBACG,0BACC,6LAAC,yIAAA,CAAA,UAAyB;YACxB,KAAK;YACL,YAAY,gBAAgB,IAAI,CAAC;YACjC,UAAU;;;;;iCAGZ,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAK,WAAU;;kCACd,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAE,WAAU;0CAAyC;;;;;;0CAGtD,6LAAC;gCAAE,WAAU;0CAAsC;;;;;;;;;;;;kCAIrD,6LAAC;wBAAI,WAAU;;0CACb,6LAAC,mIAAA,CAAA,UAAU;gCACT,SAAS;gCACT,oBAAoB;;;;;;0CAEtB,6LAAC;gCACC,SAAS;gCACT,WAAU;0CACX;;;;;;;;;;;;;;;;;;;;;;;;AASf;GA9DM;KAAA;uCAgES"}},
    {"offset": {"line": 1050, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}